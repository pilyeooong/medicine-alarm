# ì•Œë¦¼ ì¦‰ì‹œ ë°œë™ ë¬¸ì œ í•´ê²°

## ë¬¸ì œ

12ì‹œì— ì•Œë¦¼ì„ ë“±ë¡í–ˆëŠ”ë° 11ì‹œ 14ë¶„ì— ë°”ë¡œ í‘¸ì‹œê°€ ì˜¤ëŠ” ë¬¸ì œ

## ì›ì¸

ê¸°ì¡´ ì½”ë“œ:
```javascript
trigger: {
  hour: time.hours,
  minute: time.minutes,
  repeats: true,
}
```

ì´ ë°©ì‹ì€ expo-notificationsì˜ DailyTriggerInputì¸ë°, **ê³¼ê±° ì‹œê°„ì„ ì„¤ì •í•˜ë©´ ì¦‰ì‹œ ë°œë™**ë˜ëŠ” ë¬¸ì œê°€ ìžˆì—ˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´:
- í˜„ìž¬ ì‹œê°„: 11ì‹œ 14ë¶„
- ì„¤ì •í•œ ì‹œê°„: 12ì‹œ 00ë¶„
- í•˜ì§€ë§Œ ì•Œë¦¼ì´ ì¦‰ì‹œ ë°œë™ë¨ (ë²„ê·¸)

## í•´ê²° ë°©ë²•

**í–¥í›„ 30ì¼ì¹˜ ì•Œë¦¼ì„ ë¯¸ë¦¬ ì˜ˆì•½í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë³€ê²½**

```javascript
const scheduleNextNotification = async (medicine, notificationIds = []) => {
  const time = parseTime(medicine.time);
  const ids = [];

  for (let i = 0; i < 30; i++) {
    const scheduledTime = new Date();
    scheduledTime.setHours(time.hours, time.minutes, 0, 0);
    scheduledTime.setDate(scheduledTime.getDate() + i);

    // ê³¼ê±° ì‹œê°„ì€ ê±´ë„ˆë›°ê¸°
    if (scheduledTime <= new Date()) continue;

    const id = await Notifications.scheduleNotificationAsync({
      content: {
        title: 'ðŸ’Š ì•½ ë¨¹ì„ ì‹œê°„ì´ì—ìš”!',
        body: `${medicine.name} ë³µìš©í•˜ì„¸ìš”`,
      },
      trigger: {
        date: scheduledTime,  // ì •í™•í•œ ë‚ ì§œì™€ ì‹œê°„ìœ¼ë¡œ ì„¤ì •
      },
    });
    ids.push(id);
  }

  return ids;
};
```

### ì£¼ìš” ë³€ê²½ ì‚¬í•­

1. **ì •í™•í•œ Date ê°ì²´ ì‚¬ìš©**
   - `date: scheduledTime`ìœ¼ë¡œ ì •í™•í•œ ì‹œê°„ ì„¤ì •
   - ê³¼ê±° ì‹œê°„ì€ ìžë™ìœ¼ë¡œ ê±´ë„ˆëœ€

2. **30ì¼ì¹˜ ì•Œë¦¼ ë¯¸ë¦¬ ì˜ˆì•½**
   - ë§¤ì¼ ë°˜ë³µì´ ì•„ë‹ˆë¼ 30ì¼ì¹˜ë¥¼ í•œ ë²ˆì— ì˜ˆì•½
   - ê° ì•Œë¦¼ë§ˆë‹¤ ê³ ìœ  ID ë¶€ì—¬

3. **notificationId â†’ notificationIds ë°°ì—´**
   - ì—¬ëŸ¬ ì•Œë¦¼ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ë°°ì—´ë¡œ ì €ìž¥
   - ì‚­ì œ ì‹œ ëª¨ë“  ì•Œë¦¼ì„ ì·¨ì†Œ

## í…ŒìŠ¤íŠ¸ ë°©ë²•

### 1. ê¸°ì¡´ ì•½ ì‚­ì œ
ê¸°ì¡´ì— ë“±ë¡ëœ ì•½ì´ ìžˆë‹¤ë©´ ëª¨ë‘ ì‚­ì œí•˜ì„¸ìš”.

### 2. ìƒˆë¡œ ì•½ ë“±ë¡
- í˜„ìž¬ ì‹œê°„ë³´ë‹¤ **ì´í›„ ì‹œê°„**ìœ¼ë¡œ ë“±ë¡ (ì˜ˆ: í˜„ìž¬ 11:20 â†’ 11:30 ë“±ë¡)
- í˜„ìž¬ ì‹œê°„ë³´ë‹¤ **ì´ì „ ì‹œê°„**ìœ¼ë¡œ ë“±ë¡ (ì˜ˆ: í˜„ìž¬ 11:20 â†’ 10:00 ë“±ë¡)

### 3. í™•ì¸ ì‚¬í•­
âœ… ë“±ë¡ ì§í›„ ì•Œë¦¼ì´ **ì¦‰ì‹œ ì˜¤ì§€ ì•ŠìŒ**
âœ… ì„¤ì •í•œ ì‹œê°„ì—ë§Œ ì•Œë¦¼ì´ ì˜´
âœ… "30ì¼ì¹˜ ì•Œë¦¼ì´ ì˜ˆì•½ë˜ì—ˆìŠµë‹ˆë‹¤" ë©”ì‹œì§€ í‘œì‹œ

### 4. ì˜ˆì•½ëœ ì•Œë¦¼ í™•ì¸ (ê°œë°œìž ëª¨ë“œ)
```javascript
// ê°œë°œìž ì½˜ì†”ì—ì„œ í™•ì¸
const allNotifications = await Notifications.getAllScheduledNotificationsAsync();
console.log('ì˜ˆì•½ëœ ì•Œë¦¼:', allNotifications.length);
```

## ë™ìž‘ ë°©ì‹

### ë“±ë¡ ì‹œ
1. í˜„ìž¬ ë‚ ì§œë¶€í„° 30ì¼ í›„ê¹Œì§€ ê³„ì‚°
2. ê° ë‚ ì§œì˜ ì„¤ì •í•œ ì‹œê°„ì— ì•Œë¦¼ ì˜ˆì•½
3. ê³¼ê±° ì‹œê°„ì€ ìžë™ìœ¼ë¡œ ê±´ë„ˆë›°ê¸°
4. ëª¨ë“  ì•Œë¦¼ IDë¥¼ ë°°ì—´ë¡œ ì €ìž¥

### ì˜ˆì‹œ
í˜„ìž¬: 2025-10-25 11:14
ì„¤ì •: 12:00

ì˜ˆì•½ë˜ëŠ” ì•Œë¦¼:
- 2025-10-25 12:00 (ì˜¤ëŠ˜, 46ë¶„ í›„)
- 2025-10-26 12:00 (ë‚´ì¼)
- 2025-10-27 12:00 (ëª¨ë ˆ)
- ...
- 2025-11-23 12:00 (30ì¼ í›„)

ì´ 30ê°œì˜ ì•Œë¦¼ì´ ì˜ˆì•½ë©ë‹ˆë‹¤.

### ì‚­ì œ ì‹œ
1. ì €ìž¥ëœ ëª¨ë“  notificationIdsë¥¼ ìˆœíšŒ
2. ê° ì•Œë¦¼ì„ ê°œë³„ì ìœ¼ë¡œ ì·¨ì†Œ
3. ì•½ ë°ì´í„° ì‚­ì œ

## ì œí•œ ì‚¬í•­

1. **30ì¼ ì œí•œ**
   - 30ì¼ì¹˜ë§Œ ë¯¸ë¦¬ ì˜ˆì•½
   - 30ì¼ ì´í›„ì—ëŠ” ì•±ì„ ë‹¤ì‹œ ì—´ì–´ì•¼ í•¨
   - í–¥í›„ ì—…ë°ì´íŠ¸ì—ì„œ ìžë™ ê°±ì‹  ê¸°ëŠ¥ ì¶”ê°€ ê°€ëŠ¥

2. **iOS ì•Œë¦¼ ì œí•œ**
   - iOSëŠ” ìµœëŒ€ 64ê°œì˜ ì˜ˆì•½ ì•Œë¦¼ë§Œ í—ˆìš©
   - ì•½ì„ 2ê°œ ì´ìƒ ë“±ë¡í•˜ë©´ ì¼ë¶€ ì•Œë¦¼ì´ ì˜ˆì•½ ì•ˆë  ìˆ˜ ìžˆìŒ

## ê°œì„  ë°©ì•ˆ (í–¥í›„)

1. **Background Taskë¡œ ìžë™ ê°±ì‹ **
   - ì•±ì´ ë°±ê·¸ë¼ìš´ë“œì—ì„œë„ ì•Œë¦¼ ê°±ì‹ 
   - expo-background-fetch ì‚¬ìš©

2. **ì•Œë¦¼ ê°œìˆ˜ ìµœì í™”**
   - 7ì¼ì¹˜ë§Œ ì˜ˆì•½í•˜ê³  ì£¼ê¸°ì ìœ¼ë¡œ ê°±ì‹ 
   - iOS 64ê°œ ì œí•œ íšŒí”¼

3. **ì•Œë¦¼ ìƒíƒœ í‘œì‹œ**
   - "ë‹¤ìŒ ì•Œë¦¼: 10ì›” 25ì¼ 12:00"
   - "ë‚¨ì€ ì˜ˆì•½ ì•Œë¦¼: 30ê°œ"

## ê²°ê³¼

âœ… **ì¦‰ì‹œ ë°œë™ ë¬¸ì œ ì™„ì „ížˆ í•´ê²°!**
âœ… **ì •í™•í•œ ì‹œê°„ì—ë§Œ ì•Œë¦¼ ë°œë™!**
âœ… **30ì¼ì¹˜ ì•ˆì •ì ìœ¼ë¡œ ì˜ˆì•½!**
